import{j as e,e as k,z as A,u as q,r as h,b as y,A as F,B as S,a as _}from"./index-d3b526ce.js";import{s as R}from"./selectors-ced8fbfe.js";const B="/react-lover-flower/assets/ratingOn-0015b8ca.svg",I=({rating:i,feedback:x,name:t,currentDate:c})=>{const s=[...new Array(Number(i))].map((p,d)=>e.jsx("img",{className:"star absolute h-[2em] top-0 left-0",src:B,alt:"star"},d));return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"h-[25px] text-light-turquoise text-[30px] font-normal tracking-[0.6px] uppercase",children:"“"}),e.jsx("h2",{className:"max-w-[540px] text-[16px] font-normal tracking-[0.32px]",children:x}),e.jsx("div",{className:"rating__group mt-1 relative w-[10em] h-[2em]",children:s}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("h4",{className:"text-[14px] font-normal tracking-[0.14px] text-[#555]",children:[t,","]}),e.jsx("h4",{className:"text-[14px] font-normal tracking-[0.28px] text-[#555]",children:c})]})]})},$=()=>{const i=k(),x=new Date,t=A(),c=q(R(t)),[s,p]=h.useState(),d=x.toLocaleDateString().split(".").join("/"),{register:a,handleSubmit:g,formState:{errors:m}}=y(),v=r=>{f(r.rating,r.review,r.name,r.email)},b=r=>{console.log(r)};h.useEffect(()=>{async function r(){try{const{payload:l}=await i(F({bouquetId:t}));p(l)}catch(l){console.log(l)}}r()},[t,i]);const f=async(r,l,w,N)=>{try{const n={rating:r,feedback:l,name:w,email:N,currentDate:d},u=s?.reduce((o,j)=>(Number(j.reviewId)===o&&o++,o),1);p(o=>[...o||[],{reviewId:String(u),bouquetId:String(t),review:n}]),i(S({reviewId:String(u),bouquetId:String(t),review:n})),await _.post(`https://655b76e2ab37729791a92825.mockapi.io/items/${t}/reviews`,{review:n})}catch(n){console.log(n)}};return e.jsxs("div",{className:"mt-16",children:[e.jsx("div",{className:"reviews",children:s?s.map(r=>e.jsx(I,{rating:r.review.rating,feedback:r.review.feedback,name:r.review.name,currentDate:r.review.currentDate},r.reviewId)):e.jsx("h3",{className:"text-[14px] font-normal tracking-[0.84px]",children:"Отзывов пока нет"})}),e.jsxs("div",{className:"mt-16 flex flex-col gap-2",children:[e.jsx("h2",{className:"text-[14px] text-light-turquoise font-normal tracking-[0.84px] uppercase",children:s?`Оставьте свой отзыв на “${c?.name}”`:`Будьте первым, кто оставил отзыв на “${c?.name}”`}),e.jsx("h3",{className:"text-[14px] font-normal tracking-[0.84px]",children:"Ваш адрес email не будет опубликован. Обязательные поля помечены *"})]}),e.jsxs("form",{onSubmit:g(v,b),className:"flex flex-col gap-5 mt-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"rating-group",children:"Ваша оценка:"}),e.jsxs("div",{className:"rating__group mt-1 relative p-0 w-[10em] h-[2em]",children:[e.jsx("input",{className:"absolute border-none top-0 left-0 m-0 h-[2em] cursor-pointer",type:"radio",id:"rating",value:"1","aria-label":"Ужасно",...a("rating",{required:!0})}),e.jsx("input",{className:"absolute border-none top-0 left-0 m-0 h-[2em] cursor-pointer",type:"radio",id:"rating",value:"2","aria-label":"Сносно",...a("rating",{required:!0})}),e.jsx("input",{className:"absolute border-none top-0 left-0 m-0 h-[2em] cursor-pointer",type:"radio",id:"rating",value:"3","aria-label":"Нормально",...a("rating",{required:!0})}),e.jsx("input",{className:"absolute border-none top-0 left-0 m-0 h-[2em] cursor-pointer",type:"radio",id:"rating",value:"4","aria-label":"Хорошо",...a("rating",{required:!0})}),e.jsx("input",{className:"absolute border-none top-0 left-0 m-0 h-[2em] cursor-pointer",type:"radio",id:"rating",value:"5","aria-label":"Отлично",...a("rating",{required:!0})})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[14px] font-normal tracking-[0.84px]",htmlFor:"review",children:"Ваш отзыв*"}),e.jsx("textarea",{className:"w-[540px] h-[180px] border border-[#555] bg-[#040A0A] p-4 placeholder:bg-[#040A0A] placeholder:text-[#395959] text-[14px] font-normal tracking-[.56px] uppercase outline-none aria-[invalid=true]:placeholder:text-[#FF3A44] aria-[invalid=true]:border-[#FF3A44]",id:"review",placeholder:"Введите комментарий",...a("review",{required:!0}),"aria-invalid":!!m.name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[14px] font-normal tracking-[0.84px]",htmlFor:"name",children:"Имя*"}),e.jsx("input",{className:"w-[540px] h-[60px] border border-[#555] bg-[#040A0A] p-4 placeholder:bg-[#040A0A] placeholder:text-[#395959] text-[14px] font-normal tracking-[.56px] uppercase outline-none aria-[invalid=true]:placeholder:text-[#FF3A44] aria-[invalid=true]:border-[#FF3A44]",type:"text",id:"name",placeholder:"Введите ваше имя",...a("name",{required:!0}),"aria-invalid":!!m.name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-[14px] font-normal tracking-[0.84px]",htmlFor:"email",children:"E-mail*"}),e.jsx("input",{className:"w-[540px] h-[60px] border border-[#555] bg-[#040A0A] p-4 placeholder:bg-[#040A0A] placeholder:text-[#395959] text-[14px] font-normal tracking-[.56px] uppercase outline-none aria-[invalid=true]:placeholder:text-[#FF3A44] aria-[invalid=true]:border-[#FF3A44]",type:"email",id:"email",placeholder:"Введите вашу почту",...a("email",{required:!0}),"aria-invalid":!!m.name})]}),e.jsx("button",{className:"w-[255px] mt-2 text-[black] text-[12px] border border-light-turquoise font-bold tracking-[1.2px] uppercase bg-light-turquoise p-4 hover:border-cherry hover:bg-cherry hover:text-[white] focus:border-cherry active:bg-cherry active:text-[white] active:shadow-[0_0_10px_0_#1B000E_inset]",children:"отправить"}),e.jsxs("p",{className:"max-w-[342px] text-[10px] font-normal tracking-[0.2px] font-roboto_condensed",children:["Нажимая на кнопку «Отправить», я даю свое согласие на обработку персональных данных, в соответствии с",e.jsx("span",{className:"text-pink underline ml-1",children:"Политикой конфиденциальности"})]})]})]})};export{$ as default};
