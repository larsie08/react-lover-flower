import{r}from"./index-fc69e251.js";import{T as y}from"./useTimeout-974cf79e.js";const b=typeof window<"u"?r.useLayoutEffect:r.useEffect,m=b;function g({controlled:e,default:t,name:n,state:o="value"}){const{current:u}=r.useRef(e!==void 0),[l,c]=r.useState(t),f=u?e:l,d=r.useCallback(h=>{u||c(h)},[]);return[f,d]}function K(e){const t=r.useRef(e);return m(()=>{t.current=e}),r.useRef((...n)=>(0,t.current)(...n)).current}let s=!0,a=!1;const E=new y,p={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function v(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&p[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function w(e){e.metaKey||e.altKey||e.ctrlKey||(s=!0)}function i(){s=!1}function V(){this.visibilityState==="hidden"&&a&&(s=!0)}function R(e){e.addEventListener("keydown",w,!0),e.addEventListener("mousedown",i,!0),e.addEventListener("pointerdown",i,!0),e.addEventListener("touchstart",i,!0),e.addEventListener("visibilitychange",V,!0)}function T(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return s||v(t)}function L(){const e=r.useCallback(u=>{u!=null&&R(u.ownerDocument)},[]),t=r.useRef(!1);function n(){return t.current?(a=!0,E.start(100,()=>{a=!1}),t.current=!1,!0):!1}function o(u){return T(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:n,ref:e}}export{L as a,m as b,K as c,g as u};
